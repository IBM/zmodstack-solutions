#
# Copyright 2023 IBM Inc. All rights reserved
# SPDX-License-Identifier: Apache2.0
#

---
- name: Initiallize SEAA framework
  ansible.builtin.include_tasks: "util/seaa_initialize.yml"

- name: Include Smart Deploy z/OS Cloud Broker task
  ansible.builtin.include_tasks: "util/smart_deploy_broker.yml"

- name: Include Manage Secret task from OCP role
  when: hostvars[current_zosendpoint]._is_active
  ansible.builtin.include_role:
    name: openshift_cluster
    tasks_from: manage_secrets
  with_items:
    - "{{ groups['zosendpoints'] }}"
  loop_control:
    loop_var: current_zosendpoint
